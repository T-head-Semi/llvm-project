# RUN: llc %s -mtriple=riscv64 -mcpu=c906 -verify-misched -run-pass=machine-scheduler -o - | FileCheck %s
# RUN: llc %s -mtriple=riscv64 -mcpu=c910 -verify-misched -run-pass=machine-scheduler -o - | FileCheck %s

--- |
  define i64 @div(i64 %A, i64 %B) #0 {
    %tmp1 = add i64 %A, %B
    %tmp2 = add i64 %A, %tmp1
    %tmp3 = add i64 %A, %tmp2
    %tmp4 = add i64 %A, %tmp3
    %tmp5 = add i64 %A, %tmp4
    %tmp6 = add i64 %A, %tmp5
    %tmp7 = add i64 %A, %tmp6
    %tmp8 = add i64 %A, %tmp7
    %tmp9 = sdiv i64 %A, %B
    %tmp10 = add i64 %tmp8, %tmp9
    ret i64 %tmp10
  }

...
---
name:            div
alignment:       2
tracksRegLiveness: true
body:             |
  bb.0 (%ir-block.0):
    liveins: $x10, $x11

    ; CHECK-LABEL: name: div
    ; CHECK: liveins: $x10, $x11
    ; CHECK: DIV
    ; CHECK-NEXT: ADD
    ; CHECK-NEXT: ADD
    ; CHECK-NEXT: ADD
    ; CHECK-NEXT: ADD
    ; CHECK-NEXT: ADD
    ; CHECK-NEXT: ADD
    ; CHECK-NEXT: ADD
    ; CHECK-NEXT: ADD
    ; CHECK-NEXT: ADD
    %1:gpr = COPY $x11
    %0:gpr = COPY $x10
    %2:gpr = ADD %0, %1
    %3:gpr = ADD %0, %2
    %4:gpr = ADD %0, %3
    %5:gpr = ADD %0, %4
    %6:gpr = ADD %0, %5
    %7:gpr = ADD %0, %6
    %8:gpr = ADD %0, %7
    %9:gpr = ADD %0, %8
    %10:gpr = DIV %0, %1
    %11:gpr = ADD %9, %10
    $x10 = COPY %11
    PseudoRET implicit $x10

...
