# RUN: llc %s -mtriple=riscv64 -mcpu=c906 -verify-misched -run-pass=machine-scheduler -o - | FileCheck %s -check-prefix=C906
# RUN: llc %s -mtriple=riscv64 -mcpu=c910 -verify-misched -run-pass=machine-scheduler -o - | FileCheck %s -check-prefix=C910

--- |
  define i64 @ld(i64 %A, i64 %B, i64* %addr) {
    %tmp1 = add i64 %A, %B
    %tmp2 = add i64 %A, %tmp1
    %tmp3 = add i64 %A, %tmp2
    %tmp4 = add i64 %A, %tmp3
    %tmp5 = add i64 %A, %tmp4
    %tmp6 = add i64 %A, %tmp5
    %tmp7 = add i64 %A, %tmp6
    %tmp8 = add i64 %A, %tmp7
    %tmp9 = load i64, i64* %addr
    %tmp10 = add i64 %tmp8, %tmp9
    ret i64 %tmp10
  }

...
---
name:            ld
alignment:       2
tracksRegLiveness: true
body:             |
  bb.0 (%ir-block.0):
    liveins: $x10, $x11, $x12

    ; C906-LABEL: name: ld
    ; C906: liveins: $x10, $x11
    ; C906: ADD
    ; C906-NEXT: ADD
    ; C906-NEXT: ADD
    ; C906-NEXT: ADD
    ; C906-NEXT: ADD
    ; C906-NEXT: ADD
    ; C906-NEXT: ADD
    ; C906-NEXT: LD
    ; C906-NEXT: ADD
    ; C906-NEXT: ADD

    ; C910-LABEL: name: ld
    ; C910: liveins: $x10, $x11, $x12
    ; C910: ADD
    ; C910-NEXT: ADD
    ; C910-NEXT: ADD
    ; C910-NEXT: ADD
    ; C910-NEXT: ADD
    ; C910-NEXT: ADD
    ; C910-NEXT: LD
    ; C910-NEXT: ADD
    ; C910-NEXT: ADD
    ; C910-NEXT: ADD

    %2:gpr = COPY $x12
    %1:gpr = COPY $x11
    %0:gpr = COPY $x10
    %3:gpr = ADD %0, %1
    %4:gpr = ADD %0, %3
    %5:gpr = ADD %0, %4
    %6:gpr = ADD %0, %5
    %7:gpr = ADD %0, %6
    %8:gpr = ADD %0, %7
    %9:gpr = ADD %0, %8
    %10:gpr = ADD %0, %9
    %11:gpr = LD %2, 0 :: (load (s64) from %ir.addr)
    %12:gpr = ADD %10, %11
    $x10 = COPY %12
    PseudoRET implicit $x10

...
